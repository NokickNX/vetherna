<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vetherna – A Terra do Equilíbrio Quebrado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">
  <style>
    /* === RESET E CONFIGURAÇÕES GLOBAIS === */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --gold: #d4af37;
      --gold-light: #f9e076;
      --gold-dark: #a67c00;
      --text-paper: #3b2f24;
      --paper-aged: #f5e6c0;
      --paper-stain: #e0d2b8;
      --paper-edge: #d8c9a7;
      --paper-spot: #b8a88f;
      --book-cover: #8b1a1a;
      --book-spine: #751515;
      --wood-bg: #3a2d1f;
      --transition-page: 1s;
      --transition-ui: 0.4s;
    }

    /* === CAMADAS DE FUNDO COM TRANSIÇÃO SUAVE === */
    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .background-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      filter: blur(4px);
      opacity: 0;
      transition: opacity 0.8s ease;
    }

    .background-layer.active {
      opacity: 1;
    }

    /* === RESTANTE DO CSS (sem mudanças visuais) === */
    body {
      color: var(--text-paper);
      font-family: 'IM Fell English', serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }

    .intro-screen {
      text-align: center;
      z-index: 100;
      opacity: 0;
      transition: opacity var(--transition-ui) ease;
      transform: translateY(20px);
    }

    .intro-screen.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .intro-title {
      font-family: 'Cinzel', serif;
      font-size: 4.6rem;
      font-weight: 900;
      color: var(--gold);
      text-shadow: 0 0 20px rgba(212, 175, 55, 0.7);
      margin-bottom: 1.5rem;
      letter-spacing: 3px;
      position: relative;
    }

    .intro-title::after {
      content: "✧";
      position: absolute;
      bottom: -22px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      color: var(--gold-light);
    }

    .intro-subtitle {
      font-size: 1.45rem;
      color: #e0d5b8;
      margin: 0 auto 3rem;
      max-width: 680px;
      line-height: 1.75;
      padding: 0 1.8rem;
    }

    .start-btn {
      background: transparent;
      color: var(--gold);
      border: 2px solid var(--gold);
      padding: 18px 56px;
      font-family: 'Cinzel', serif;
      font-size: 1.55rem;
      font-weight: 700;
      border-radius: 5px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      letter-spacing: 1.6px;
      transition: all var(--transition-ui) ease;
      box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.5);
      animation: pulseGold 2.8s infinite;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease;
    }

    .start-btn.visible {
      opacity: 1;
      transform: translateY(0);
    }

    @keyframes pulseGold {
      0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.5); }
      70% { box-shadow: 0 0 0 14px rgba(212, 175, 55, 0); }
      100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
    }

    .start-btn:hover {
      background: rgba(212, 175, 55, 0.12);
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(212, 175, 55, 0.6);
    }

    .book-3d-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      perspective: 2500px;
      z-index: 50;
    }

    .book-3d-container.visible {
      display: flex;
      opacity: 0;
      animation: fadeIn 0.6s 0.4s forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .book-3d {
      position: relative;
      width: 80vmin;
      height: 70vmin;
      transform: rotateX(5deg) rotateY(0deg);
      filter: drop-shadow(0 30px 50px rgba(0,0,0,0.7));
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0;
    }

    .book-cover-front {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--book-cover), #701010);
      border: 6px solid var(--gold-dark);
      border-radius: 8px;
      box-shadow: 
        0 20px 50px rgba(0,0,0,0.8),
        inset 0 0 20px rgba(0,0,0,0.5);
      transform: translateZ(15px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: var(--gold-light);
      font-family: 'Cinzel', serif;
      font-size: 2.2rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.6);
      z-index: 30;
      opacity: 1;
      transition: opacity 0.7s ease;
      overflow: hidden;
    }

    .book-cover-front.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .cover-ornament {
      position: absolute;
      color: var(--gold);
      font-size: 24px;
      opacity: 0.8;
    }

    .ornament-tl { top: 20px; left: 20px; }
    .ornament-tr { top: 20px; right: 20px; }
    .ornament-bl { bottom: 20px; left: 20px; }
    .ornament-br { bottom: 20px; right: 20px; }

    .cover-crystal {
      position: relative;
      width: 100px;
      height: 100px;
      margin-bottom: 15px;
    }

    .cover-crystal::before,
    .cover-crystal::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, var(--gold-light) 0%, transparent 70%);
      opacity: 0.3;
      animation: pulseCrystal 3s infinite alternate;
    }

    .cover-crystal::after {
      transform: rotate(45deg);
    }

    .cover-crystal-inner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: conic-gradient(
        from 0deg,
        var(--gold),
        var(--gold-light),
        var(--gold),
        var(--gold-dark),
        var(--gold)
      );
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
    }

    @keyframes pulseCrystal {
      0% { opacity: 0.2; transform: scale(1); }
      100% { opacity: 0.4; transform: scale(1.03); }
    }

    .book-spine {
      position: absolute;
      width: 20px;
      height: 70vmin;
      background: linear-gradient(to right, var(--book-spine), #601010);
      border-top: 6px solid var(--gold-dark);
      border-bottom: 6px solid var(--gold-dark);
      border-left: 4px solid var(--gold);
      left: -20px;
      top: 0;
      transform-origin: right center;
      transform: rotateY(90deg) translateZ(15px);
      box-shadow: -5px 0 15px rgba(0,0,0,0.5);
      z-index: 25;
      background-image: 
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 10px,
          rgba(255,255,255,0.05) 10px,
          rgba(255,255,255,0.05) 12px
        );
    }

    /* === PÁGINA INICIAL — FOLHA ANTIGA (OTIMIZADA PARA MOBILE) === */
    .static-page {
      position: relative;
      width: 90%;
      height: 90vh; /* Quase toda a altura da tela */
      background-color: var(--paper-aged);
      background-image:
        url("image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect width='100' height='100' fill='none' stroke='%23d8c9a7' stroke-width='0.3'/%3E%3Ccircle cx='15' cy='85' r='15' fill='%23b8a88f' fill-opacity='0.1'/%3E%3Ccircle cx='85' cy='15' r='12' fill='%23e0d2b8' fill-opacity='0.1'/%3E%3C/svg%3E"),
        radial-gradient(circle at 10% 90%, rgba(184, 168, 143, 0.12), transparent 40%),
        radial-gradient(circle at 90% 10%, rgba(224, 210, 184, 0.1), transparent 40%);
      border: 1px solid var(--paper-edge);
      border-radius: 6px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1.5rem;
      text-align: center;
      font-size: 1.35rem;
      line-height: 1.7;
      box-shadow: 
        0 10px 30px rgba(0,0,0,0.3),
        inset 0 0 10px rgba(0,0,0,0.1);
      transition: transform var(--transition-page) cubic-bezier(0.645, 0.045, 0.355, 1);
      z-index: 10;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
      transform: none;
      backface-visibility: visible;
      overflow: hidden;
    }

    .static-page::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(0,0,0,0.03) 20%, transparent 40%, rgba(0,0,0,0.03) 60%, transparent);
      z-index: -1;
      border-radius: 6px;
      pointer-events: none;
    }

    /* === CARD DOS PERSONAGENS — MODERNO E TRANSLÚCIDO (OTIMIZADO PARA MOBILE) === */
    .static-page.personagem {
      background: none !important;
      border: none !important;
      box-shadow: none !important;
      padding: 0 !important;
      margin: 0 !important;
      width: 90% !important;
      height: 90vh !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      clip-path: none !important;
      border-radius: 0 !important;
    }

    .static-page.personagem .page-content-inner {
      width: 90%;
      max-width: 500px;
      background: rgba(245, 230, 192, 0.75);
      border: 1px solid white;
      box-shadow: 12px 17px 51px rgba(0, 0, 0, 0.22);
      backdrop-filter: blur(6px);
      border-radius: 17px;
      padding: 1.5rem;
      text-align: left;
      font-size: 1.8rem;
      line-height: 1.8;
      color: #3b2f24;
      cursor: pointer;
      transition: all 0.5s;
      user-select: none;
      overflow-y: auto;
      max-height: 85vh;
      scrollbar-width: none;
    }

    .static-page.personagem .page-content-inner::-webkit-scrollbar {
      display: none;
    }

    .static-page.personagem .page-content-inner:hover {
      border: 1px solid black;
      transform: scale(1.05);
    }

    .static-page.personagem .page-content-inner:active {
      transform: scale(0.95) rotateZ(1.7deg);
    }

    .static-page.personagem .page-content-inner h2 {
      font-family: 'Cinzel', serif;
      color: var(--gold-dark);
      margin-bottom: 1.4rem;
      font-size: 2.4rem;
      letter-spacing: 0.5px;
      text-align: center;
    }

    .static-page.personagem .page-content-inner p {
      font-size: 1.2rem;
      line-height: 1.8;
      text-align: justify;
    }

    .static-page.personagem .page-content-inner blockquote {
      font-style: italic;
      font-size: 1.4rem;
      margin: 1.5rem 0;
      padding: 1rem;
      border-left: 4px solid var(--gold);
      background: rgba(245, 230, 192, 0.4);
      border-radius: 8px;
    }

    .page-seal {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 20;
      transform: scale(0.8);
      opacity: 0.9;
    }

    .page-seal::before,
    .page-seal::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, var(--gold-light) 0%, transparent 70%);
      opacity: 0.3;
      animation: pulseCrystal 3s infinite alternate;
    }

    .page-seal::after {
      transform: rotate(45deg);
    }

    .page-seal-inner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 30px;
      height: 30px;
      background: conic-gradient(
        from 0deg,
        var(--gold),
        var(--gold-light),
        var(--gold),
        var(--gold-dark),
        var(--gold)
      );
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      box-shadow: 0 0 10px rgba(212, 175, 55, 0.6);
      animation: pulseSeal 1.5s infinite alternate;
    }

    @keyframes pulseSeal {
      0% { transform: translate(-50%, -50%) scale(1); }
      100% { transform: translate(-50%, -50%) scale(1.05); }
    }

    .page-seal-ornament {
      position: absolute;
      color: var(--gold);
      font-size: 14px;
      opacity: 0.7;
    }

    .seal-ornament-tl { top: 0; left: 0; }
    .seal-ornament-tr { top: 0; right: 0; }
    .seal-ornament-bl { bottom: 0; left: 0; }
    .seal-ornament-br { bottom: 0; right: 0; }

    .nav-controls {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 24px;
      z-index: 60;
    }

    .nav-btn {
      background: rgba(212, 175, 55, 0.18);
      color: var(--gold);
      border: 1px solid var(--gold);
      width: 56px;
      height: 56px;
      border-radius: 50%;
      font-family: 'Cinzel', serif;
      font-size: 1.4rem;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.28s ease;
      backdrop-filter: blur(3px);
    }

    .nav-btn:hover:not(:disabled) {
      background: rgba(212, 175, 55, 0.4);
      transform: scale(1.15);
      box-shadow: 0 0 15px rgba(212, 175, 55, 0.6);
    }

    .nav-btn:disabled {
      opacity: 0.32;
      cursor: not-allowed;
      transform: none;
    }

    /* === MEDIA QUERIES OTIMIZADAS PARA CELULAR === */
    @media (max-width: 900px) {
      .book-3d { width: 85vmin; height: 65vmin; }
      .static-page { width: 85%; padding: 2rem; font-size: 1.25rem; }
      .intro-title { font-size: 3.8rem; }
      .intro-subtitle { font-size: 1.3rem; }
      .start-btn { padding: 16px 48px; font-size: 1.4rem; }
      .static-page.personagem .page-content-inner {
        width: 95%;
        font-size: 1.6rem;
        padding: 1.5rem;
        max-height: 80vh;
      }
      .static-page.personagem .page-content-inner h2 {
        font-size: 2.2rem;
      }
    }

    @media (max-width: 650px) {
      .book-3d { width: 90vmin; height: 60vmin; }
      .static-page { width: 80%; padding: 1.5rem; font-size: 1.15rem; }
      .intro-title { font-size: 3.0rem; }
      .intro-subtitle { font-size: 1.2rem; padding: 0 1.4rem; }
      .start-btn { padding: 14px 40px; font-size: 1.3rem; }
      .static-page.personagem .page-content-inner {
        width: 98%;
        font-size: 1.7rem;
        padding: 1.2rem;
        max-height: 75vh;
      }
      .static-page.personagem .page-content-inner h2 {
        font-size: 2.0rem;
      }
      .nav-btn { width: 60px; height: 60px; font-size: 1.4rem; }
    }

    @media (max-width: 480px) {
      .book-3d { width: 95vmin; height: 55vmin; }
      .static-page { width: 75%; padding: 1rem; font-size: 1.05rem; }
      .intro-title { font-size: 2.4rem; }
      .cover-crystal { width: 80px; height: 80px; }
      .cover-crystal-inner { width: 50px; height: 50px; }
      .static-page.personagem .page-content-inner {
        width: 98%;
        font-size: 1.8rem;
        padding: 1rem;
        max-height: 70vh;
      }
      .static-page.personagem .page-content-inner h2 {
        font-size: 2.2rem;
      }
      .nav-btn { width: 70px; height: 70px; font-size: 1.6rem; }
    }

    /* === LOADER === */
    .loader {
      --duration: 3s;
      --primary: var(--gold);
      --primary-light: var(--gold-light);
      --primary-rgba: rgba(212, 175, 55, 0);
      width: 200px;
      height: 320px;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transform-style: preserve-3d;
      perspective: 1000px;
      backface-visibility: hidden;
      z-index: 9999;
    }

    @media (max-width: 480px) {
      .loader {
        width: 160px;
        height: 256px;
        transform: translate(-50%, -50%) scale(0.8);
      }
    }

    .loader .ground {
      position: absolute;
      left: -50px;
      bottom: -120px;
      transform-style: preserve-3d;
      transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);
    }

    .loader .ground div {
      transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(0);
      width: 200px;
      height: 200px;
      background: var(--primary);
      background: linear-gradient(45deg, var(--primary) 0%, var(--primary) 50%, var(--primary-light) 50%, var(--primary-light) 100%);
      transform-style: preserve-3d;
      animation: ground var(--duration) linear forwards infinite;
    }

    .loader .ground div:before,
    .loader .ground div:after {
      --rx: 90deg;
      --ry: 0deg;
      --x: 44px;
      --y: 162px;
      --z: -50px;
      content: "";
      width: 156px;
      height: 300px;
      opacity: 0;
      background: linear-gradient(var(--primary), var(--primary-rgba));
      position: absolute;
      transform: rotateX(var(--rx)) rotateY(var(--ry)) translate(var(--x), var(--y)) translateZ(var(--z));
      animation: ground-shine var(--duration) linear forwards infinite;
    }

    .loader .ground div:after {
      --rx: 90deg;
      --ry: 90deg;
      --x: 0;
      --y: 177px;
      --z: 150px;
    }

    .loader .box {
      --x: 0;
      --y: 0;
      position: absolute;
      animation: var(--duration) linear forwards infinite;
      transform: translate(var(--x), var(--y));
    }

    .loader .box div {
      background-color: var(--primary);
      width: 48px;
      height: 48px;
      position: relative;
      transform-style: preserve-3d;
      animation: var(--duration) ease forwards infinite;
      transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);
    }

    .loader .box div:before,
    .loader .box div:after {
      --rx: 90deg;
      --ry: 0deg;
      --z: 24px;
      --y: -24px;
      --x: 0;
      content: "";
      position: absolute;
      background-color: inherit;
      width: inherit;
      height: inherit;
      transform: rotateX(var(--rx)) rotateY(var(--ry)) translate(var(--x), var(--y)) translateZ(var(--z));
      filter: brightness(var(--b, 1.2));
    }

    .loader .box div:after {
      --rx: 0deg;
      --ry: 90deg;
      --x: 24px;
      --y: 0;
      --b: 1.4;
    }

    .loader .box.box0 { --x: -220px; --y: -120px; left: 58px; top: 108px; }
    .loader .box.box1 { --x: -260px; --y: 120px; left: 25px; top: 120px; }
    .loader .box.box2 { --x: 120px; --y: -190px; left: 58px; top: 64px; }
    .loader .box.box3 { --x: 280px; --y: -40px; left: 91px; top: 120px; }
    .loader .box.box4 { --x: 60px; --y: 200px; left: 58px; top: 132px; }
    .loader .box.box5 { --x: -220px; --y: -120px; left: 25px; top: 76px; }
    .loader .box.box6 { --x: -260px; --y: 120px; left: 91px; top: 76px; }
    .loader .box.box7 { --x: -240px; --y: 200px; left: 58px; top: 87px; }

    .loader .box0 { animation-name: box-move0; } .loader .box0 div { animation-name: box-scale0; }
    .loader .box1 { animation-name: box-move1; } .loader .box1 div { animation-name: box-scale1; }
    .loader .box2 { animation-name: box-move2; } .loader .box2 div { animation-name: box-scale2; }
    .loader .box3 { animation-name: box-move3; } .loader .box3 div { animation-name: box-scale3; }
    .loader .box4 { animation-name: box-move4; } .loader .box4 div { animation-name: box-scale4; }
    .loader .box5 { animation-name: box-move5; } .loader .box5 div { animation-name: box-scale5; }
    .loader .box6 { animation-name: box-move6; } .loader .box6 div { animation-name: box-scale6; }
    .loader .box7 { animation-name: box-move7; } .loader .box7 div { animation-name: box-scale7; }

    @keyframes box-move0 { 12% { transform: translate(var(--x), var(--y)); } 25%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale0 { 6% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 14%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move1 { 16% { transform: translate(var(--x), var(--y)); } 29%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale1 { 10% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 18%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move2 { 20% { transform: translate(var(--x), var(--y)); } 33%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale2 { 14% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 22%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move3 { 24% { transform: translate(var(--x), var(--y)); } 37%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale3 { 18% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 26%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move4 { 28% { transform: translate(var(--x), var(--y)); } 41%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale4 { 22% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 30%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move5 { 32% { transform: translate(var(--x), var(--y)); } 45%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale5 { 26% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 34%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move6 { 36% { transform: translate(var(--x), var(--y)); } 49%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale6 { 30% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 38%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes box-move7 { 40% { transform: translate(var(--x), var(--y)); } 53%, 52% { transform: translate(0, 0); } 80% { transform: translate(0, -32px); } 90%, 100% { transform: translate(0, 188px); } }
    @keyframes box-scale7 { 34% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); } 42%, 100% { transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); } }
    @keyframes ground { 0%, 65% { transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(0); } 75%, 90% { transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(1); } 100% { transform: rotateX(90deg) rotateY(0deg) translate(-48px, -120px) translateZ(100px) scale(0); } }
    @keyframes ground-shine { 0%, 70% { opacity: 0; } 75%, 87% { opacity: 0.2; } 100% { opacity: 0; } }
  </style>
</head>
<body>

  <!-- CAMADAS DE FUNDO -->
  <div class="background-container">
    <div class="background-layer" id="bgLayer1"></div>
    <div class="background-layer" id="bgLayer2"></div>
  </div>

  <!-- LOADER -->
  <div class="loader" id="loadingScreen">
    <div class="box box0"><div></div></div>
    <div class="box box1"><div></div></div>
    <div class="box box2"><div></div></div>
    <div class="box box3"><div></div></div>
    <div class="box box4"><div></div></div>
    <div class="box box5"><div></div></div>
    <div class="box box6"><div></div></div>
    <div class="box box7"><div></div></div>
    <div class="ground"><div></div></div>
  </div>

  <!-- TELA INICIAL -->
  <div class="intro-screen" id="introScreen">
    <h1 class="intro-title">VETHERNA</h1>
    <p class="intro-subtitle">
      Uma terra onde o tempo se dobra e a magia respira. Os reinos estão divididos, os deuses dormem... e a profecia dos Quatro Ecos começa.
    </p>
    <button class="start-btn" id="startBtn">Comece sua jornada</button>
  </div>

  <!-- LIVRO 3D -->
  <div class="book-3d-container" id="bookContainer">
    <div class="book-3d">
      <div class="book-cover-front" id="frontCover">
        <div class="cover-ornament ornament-tl">✦</div>
        <div class="cover-ornament ornament-tr">✧</div>
        <div class="cover-ornament ornament-bl">✧</div>
        <div class="cover-ornament ornament-br">✦</div>
        <div class="cover-crystal">
          <div class="cover-crystal-inner"></div>
        </div>
        <div>Crônicas de Vetherna</div>
      </div>

      <div class="static-page" id="staticPage">
        <div class="page-seal">
          <div class="page-seal-inner"></div>
          <div class="page-seal-ornament seal-ornament-tl">✦</div>
          <div class="page-seal-ornament seal-ornament-tr">✧</div>
          <div class="page-seal-ornament seal-ornament-bl">✧</div>
          <div class="page-seal-ornament seal-ornament-br">✦</div>
        </div>
        <div class="page-content-inner" id="pageContent"></div>
      </div>
    </div>

    <div class="nav-controls">
      <button class="nav-btn" id="prevBtn" disabled>‹</button>
      <button class="nav-btn" id="nextBtn">›</button>
    </div>
  </div>

  <script>
    let currentPageIndex = 0;
    const totalPages = 5;
    const introScreen = document.getElementById('introScreen');
    const bookContainer = document.getElementById('bookContainer');
    const frontCover = document.getElementById('frontCover');
    const startBtn = document.getElementById('startBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pageContent = document.getElementById('pageContent');
    const loadingScreen = document.getElementById('loadingScreen');

    const pages = [
      `<p>Uma terra onde o tempo se dobra e a magia respira.<br>
      Os reinos de Vetherna estão divididos entre Luz e Sombra, onde o poder antigo das estrelas ainda murmura nos ventos e os deuses dormem sob a terra.<br>
      Dizem que ninguém que veio “de fora” sobreviveu por muito tempo — pois Vetherna é viva, e escolhe quem pode permanecer.</p>

      <blockquote>“Quando o equilíbrio se quebrar, quatro ecos cruzarão o céu.<br>
      Almas estranhas, nascidas de outro mundo,<br>
      que trarão consigo tanto a ruína quanto a salvação.”</blockquote>

      <p><em>— História de VETHERNA, a Terra do jogo</em></p>`,

      `<h2>Lia, A Camponesa do Amanhecer</h2>
      <p>Antes de Vetherna, Lia era conhecida por sua doçura e por enxergar esperança mesmo onde ninguém mais via. Sua bondade era sua maior força — e também sua maior fraqueza.
Em Vetherna, ela desperta como uma simples camponesa, obrigada a viver sob o peso de um mundo desigual e perigoso. Mas, conforme os dias passam, Lia descobre dentro de si uma luz capaz de curar e trazer vida onde a escuridão domina.
Sua jornada é aprender que compaixão exige coragem — e que para proteger o que ama, às vezes é preciso se erguer contra tudo o que teme.
</p>`,

      `<h2>Nara, A Arqueira das Sombras</h2>
      <p>Antes de cruzar o véu, Nara sempre foi guiada pela independência e pelo impulso de nunca depender de ninguém. A solidão era sua armadura, e a liberdade, seu refúgio.
Em Vetherna, ela se torna uma arqueira errante, caçando para sobreviver nas florestas esquecidas. As árvores sussurram verdades que ela tenta ignorar, e o vento carrega lembranças que preferiria esquecer.
Sua jornada é aprender que coragem não é lutar sozinha, mas permitir que outros lutem ao seu lado.</p>`,

      `<h2>Daren, O Soldado do Vale</h2>
      <p>Daren sempre acreditou que a força existia para proteger. Em seu mundo, ele era o escudo — o que suportava as quedas para que outros pudessem se erguer.
Em Vetherna, ele se vê em meio a guerras de reinos, servindo exércitos que lutam por motivos que ele não entende. Aos poucos, começa a questionar o peso da glória e o preço da obediência.
Sua jornada é descobrir que verdadeira bravura não é vencer batalhas, mas escolher as causas que merecem ser defendidas.
</p>`,

      `<h2>Eron, O Aprendiz do Céu </h2>
      <p>Eron sempre viveu mais dentro da própria mente do que no mundo ao redor. Inteligente, observador e curioso, buscava respostas onde ninguém via perguntas.
Em Vetherna, desperta em uma torre antiga, cercado de livros e segredos, como aprendiz de uma magia que desafia o tempo. A cada feitiço aprendido, ele percebe que o conhecimento pode tanto libertar quanto corromper.
Sua jornada é entender que sabedoria verdadeira não vem de saber tudo — mas de aceitar o que não pode ser controlado.</p>`
    ];

    const pageBackgrounds = [
      './img/fundop.png',
      './img/lia.png',
      './img/nara.png',
      './img/daren.png',
      './img/eron.png'
    ];

    // ✅ Define o fundo inicial IMEDIATAMENTE
    document.getElementById('bgLayer1').style.backgroundImage = "url('./img/fundop.png')";
    document.getElementById('bgLayer1').classList.add('active');

    // === PRÉ-CARREGAR IMAGENS ===
    function preloadImages(urls) {
      return Promise.all(urls.map(url => {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve(url);
          img.onerror = reject;
          img.src = url;
        });
      }));
    }

    // === TROCA SUAVE DE FUNDO ===
    let currentLayer = 1;
    function changeBackground(src) {
      const layer1 = document.getElementById('bgLayer1');
      const layer2 = document.getElementById('bgLayer2');
      
      const inactiveLayer = currentLayer === 1 ? layer2 : layer1;
      const activeLayer = currentLayer === 1 ? layer1 : layer2;

      // Define nova imagem no layer inativo
      inactiveLayer.style.backgroundImage = `url('${src}')`;
      inactiveLayer.classList.remove('active');
      
      // Ativa o novo layer com transição
      setTimeout(() => {
        activeLayer.classList.remove('active');
        inactiveLayer.classList.add('active');
        currentLayer = currentLayer === 1 ? 2 : 1;
      }, 50);
    }

    // === FUNÇÕES EXISTENTES ===
    function showLoader() {
      // Pré-carrega todas as imagens antes de mostrar a tela inicial
      preloadImages(pageBackgrounds).then(() => {
        setTimeout(() => {
          loadingScreen.style.opacity = 0;
          loadingScreen.style.pointerEvents = 'none';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
            introScreen.classList.add('visible');
            setTimeout(() => {
              startBtn.classList.add('visible');
            }, 600);
          }, 500);
        }, 1000); // Loader dura pelo menos 1s + tempo de carregamento
      }).catch(err => {
        console.warn("Erro ao carregar imagens:", err);
        // Mesmo com erro, continua
        setTimeout(() => {
          loadingScreen.style.opacity = 0;
          setTimeout(() => {
            loadingScreen.style.display = 'none';
            introScreen.classList.add('visible');
            setTimeout(() => startBtn.classList.add('visible'), 600);
          }, 500);
        }, 2000);
      });
    }

    function openBook() {
      introScreen.classList.remove('visible');
      startBtn.classList.remove('visible');
      setTimeout(() => {
        bookContainer.classList.add('visible');
        setTimeout(() => {
          frontCover.classList.add('hidden');
          showPage(0);
          updateNavButtons();
        }, 900);
      }, 500);
      startBtn.disabled = true;
    }

    function showPage(index) {
      if (index < 0 || index >= pages.length) return;
      currentPageIndex = index;
      pageContent.innerHTML = pages[currentPageIndex];
      changeBackground(pageBackgrounds[currentPageIndex] || './img/fundop.png');

      // Aplica ou remove classe "personagem"
      const staticPage = document.getElementById('staticPage');
      if (index === 0) {
        staticPage.classList.remove('personagem');
      } else {
        staticPage.classList.add('personagem');
      }

      updateNavButtons();
    }

    function updateNavButtons() {
      prevBtn.disabled = (currentPageIndex <= 0);
      nextBtn.disabled = (currentPageIndex >= pages.length - 1);
    }

    function turnPage(direction) {
      const newIndex = currentPageIndex + direction;
      showPage(newIndex);
    }

    startBtn.addEventListener('click', openBook);
    prevBtn.addEventListener('click', () => turnPage(-1));
    nextBtn.addEventListener('click', () => turnPage(1));

    document.documentElement.style.overflowX = 'hidden';
    document.body.style.overflowX = 'hidden';

    window.addEventListener('load', showLoader);
  </script>

</body>
</html>